<!DOCTYPE html>

<html lang="en">
	<head>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<meta name="keywords" content="2D, Project, UTM, Shooter,Game">
		<meta name="description" content="A fortnite inspired 2D shooter">
		<meta HTTP-EQUIV="EXPIRES" CONTENT="-1">
		<link rel="stylesheet" type="text/css" href="css/stylesheet.css">
		<title>BATTLE ROYALE</title>

		
		<script language="javascript" src="model.js" > </script>
		<script language="javascript" src="controller.js" > </script>
		<script language = "javascript" src="js/main.js"></script>


		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

		<script  language = "javascript" src='ftd.js'></script>
		<style>
		</style>
	</head>



		<div  id = "log_container">
			<form >
			<label for="name"><b>Username</b></label>
			<input type="text" placeholder="Enter Username; case sensitive" id="uname" class = "uname" required>
		
			<label for="password"><b>Password</b></label>
			<input type="password" placeholder="Enter Password" id="password" class = "password" required>
		
			<button id = "submit" type="submit">submit</button>
			<button id = "cancel" type="cancel" formnovalidate >cancel</button>
				</form>
		</div>

		<div  id = "reg_container">
				<form >
				<label for="name"><b>Username</b></label>
				<input type="text" placeholder="Enter Username; case sensitive" id="runame" class = "runame" required>
			
				<label for="email"><b>Email</b></label>
				<input type="text" placeholder="Enter email address" id="remail" class = "remail" required>

				<label for="password"><b>Password</b></label>
				<input type="password" placeholder="Enter Password" id="rpassword" class = "rpassword" required>
			
				<button id = "register" type="register">Register</button>
				<button id = "cancel" type="cancel" formnovalidate >cancel</button>
					</form>
			</div>

			<div  id = "change_container">
					<form >
					<label for="cname"><b>Username</b></label>
					<input type="text" placeholder="Enter Username; case sensitive" id="cname" class = "cname" required>
				
					<label for="cpassword"><b>Password</b></label>
					<input type="password" placeholder="Enter Password" id="cpassword" class = "cpassword" required>
				
					<label for="newpassword"><b>New Password</b></label>
					<input type="password" placeholder="Enter New Password" id="newpassword" class = "newpassword" required>

					<button id = "change" type="change">Make Change</button>
					<button id = "cancel" type="cancel" formnovalidate >cancel</button>
						</form>
				</div>


	<body  onload="setupGame(); startGame();">

		<div class = "NavigationBar">
            <a href="index.html">
                <img src="images/icon.png" class="logo" alt = "Homepage">
                
			</a>

		
       
            <ul class = "menu">
				
					<li><a href="index.html">Homepage</a>></li>
					<li id = "loginbtn"><a>Login</a>></li>
                    <li id = "regbtn"><a>Register</a>></li>
					<li id = "map"><a>Change Map</a>></li>
					<li id = "map1"><a>Sandstorm</a></li>
					<li id = "map2"><a>Blizzard</a></li>
					<li id = "map3"><a>Performance Mode</a></li>
						   
						
            </ul>
	   </nav>
	   


		</div>      

		<div class = "userinfo"><strong><p>User Info </p></strong>
			<button id = "changepass" type="changepass">Change my password</button>
			 <button id = "delete" type="delete">Delete My Account</button></div>
		

		
			 <div class = "instructions"><strong><text>'W A S D' to Move Character<br>'TAB' to cycle weapons<br>RED = Ammo<br>BLUE = Health<br>Walls are breakable</text></strong></div>


		<center>
			<!-- <h1>f0rt9it32d</h1> -->
			<canvas id="stage" width="800" height="800" > </canvas>
		</center>

	

	</body>



	<script>
	

		$(document).ready(function(){
			$('#map1').css('display','none')
			$('#map2').css('display','none')
			$('#map3').css('display','none')
			$('#log_container').css('display','none')
			$('#reg_container').css('display','none')
			$('#delete').css('display','none')
			$('#changepass').css('display','none')
			$('#change_container').css('display','none')
			console.log('doc ready ');
		
			
			
			
			
		
	
});

$("#map").click(function () {
	
			$('#map1').css('display','unset')
			$('#map2').css('display','unset')
			$('#map3').css('display','unset')
		
});

$("#map1").click(function () {
	
	$('#stage').css('background-image', 'url(./images/sand_canvas.jpg)');
		$('body').css('background-image', 'url(./images/sand_bg.jpg)');
		$('h1').css('color', 'orange');
				console.log('Show log in panel')
		
			
	});


$("#map2").click(function () {
	
$('#stage').css('background-image', 'url(./images/snow_canvas.jpg)');
	$('body').css('background-image', 'url(./images/snow_bg.jpg)');
	$('h1').css('color', 'blue');
			console.log('Show log in panel')
	
		
});

$("#map3").click(function () {
	
	$('#stage').css('background-image', 'none');
		$('body').css('background-image', 'none');
		$('h1').css('color', 'black');
				console.log('Show log in panel')
		
			
	});



		$("#loginbtn").click(function () {

			$('#log_container').css('display','unset')
			$('#reg_container').css('display','none')
			$('#change_container').css('display','none');
			console.log('Show log in panel')
});


			$("#cancel").click(function () {

			$('#log_container').css('display','none')
			$('#reg_container').css('display','none')
			$('#change_container').css('display','none');
			console.log('Show log in panel')
			});

	$("#regbtn").click(function () {
			$('#log_container').css('display','none');
			$('#reg_container').css('display','unset');
			$('#change_container').css('display','none');
			console.log('Show log in panel')
		
});



                $('#submit').on("click",function(e){
                    e.preventDefault();
					console.log('select_link clicked');
					var $name = $('#uname');
					var $password = $('#password');
				
					console.log(name);

					var order = {
						name : $name.val() , 
						password: $password.val()
					};
					
					$.ajax({
						url: 'http://localhost:8000/api/user/' + $name.val,	
						type: 'GET',
						data:  order,
						
						
					
                        success: function(data) {
		
							console.log('success');
						
							
							$( "p" ).text( JSON.stringify(data) );
							$('#delete').css('display','unset');
							$('#changepass').css('display','unset')
							$('#log_container').css('display','none');
							$('#reg_container').css('display','none');
							console.log(data);
							
                        } 
					},'json');
					
		
				});				
				
				$('#register').on("click",function(e){
                    e.preventDefault();
					console.log('select_link clicked');
					var $name = $('#runame');
					var $password = $('#rpassword');
					var $email = $('#remail');
					console.log(name);

					var order = {
						name : $name.val() , 
						email: $email.val(),
						password: $password.val()
					};
					
					$.ajax({
						url: 'http://localhost:8000/api/user',	
						type: 'POST',
						data:  order,

						
					
                        success: function(data) {
							$('#log_container').css('display','none');
							$('#reg_container').css('display','none');
							$( "p" ).text( 'Account Created! You can now log in.' );
                            console.log('success');
						
							console.log(data);
                        } 
					},'json');
					
		
                });				
		  
				$('#delete').on("click",function(e){
                    e.preventDefault();
					console.log('delete clicked');
					var $name = $('#uname');
					var $password = $('#password');
				
					console.log(name);

					var order = {
						name : $name.val() , 
						password: $password.val()
					};
					
					$.ajax({
						url: 'http://localhost:8000/api/user/' + $name.val,	
						type: 'DELETE',
						data:  order,
						
						
					
                        success: function(data) {
		
							console.log('success');

							
							$( "p" ).text( JSON.stringify(data) );
							$('#log_container').css('display','none');
							$('#reg_container').css('display','none');
							console.log(data);
                        } 
					},'json');
					


		
				});		

				$('#changepass').on("click",function(e){
					e.preventDefault();
				$('#change_container').css('display','unset')
				console.log('Show change pass panel')
				});



				$('#change').on("click",function(e){
					e.preventDefault();
					
					console.log('changepass clicked');
					

				
					var $name = $('#cname');
					
					var $password = $('#cpassword');
					var $newpassword = $('#newpassword');
				

				 	var order = {
						name : $name.val() , 
						password: $password.val(),
						newpassword: $newpassword.val()
						
					};
					
					$.ajax({
						url: 'http://localhost:8000/api/user/' + $name.val,	
						type: 'PUT',
						data:  order,

						
					
                        success: function(data) {
							$('#log_container').css('display','none');
							$('#reg_container').css('display','none');
							$('#change_container').css('display','none');
							$( "p" ).text( 'password changed' );
							
                            console.log('success');
							
                        } 
					},'json'); 
				
		
                });		
	</script>
		
	 




</html>

